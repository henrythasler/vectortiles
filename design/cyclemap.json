{
  "version": 8,
  "name": "Mapbox Local",
  "metadata": {},
  "sources": {
    "global": {
      "type": "vector",
      "tiles": [
        "http://localhost:8080/maps/global/{z}/{x}/{y}.pbf"
      ]
    },
    "local": {
      "type": "vector",
      "tiles": [
        "http://localhost:8080/maps/local/{z}/{x}/{y}.pbf?debug=true"
      ]
    },
    "mapbox-terrain-rgb": {
      "type": "raster-dem",
      "url": "mapbox://mapbox.terrain-rgb"
    }    
  },
  "sprite": "http://localhost:8081/sprites/cyclemap",
  "glyphs": "mapbox://fonts/mapbox/{fontstack}/{range}.pbf",
  "layers": [
    {
      "id": "background",
      "type": "background",
      "paint": {
        "background-color": "#f6f4e7"
      }
    },
    {
      "id": "water-ocean",
      "type": "fill",
      "source": "global",
      "source-layer": "water",
      "paint": {
        "fill-color": "#7babcd",
        "fill-opacity-transition": {
          "duration": 2000
        },
        "fill-outline-color": "rgba(192,0,0,0)"
      }
    },
    {
      "id": "landuse-residential",
      "type": "fill",
      "source": "local",
      "source-layer": "landuse",
      "minzoom": 10,
      "maxzoom": 24,
      "filter": [
        "all",
        [
          "in",
          "subclass",
          "commercial",
          "retail",
          "residential"
        ]
      ],
      "layout": {
        "visibility": "visible"
      },
      "paint": {
        "fill-color": {
          "stops": [
            [
              14,
              "rgba(204, 204, 204, 1)"
            ],
            [
              15,
              "rgba(225, 224, 218, 1)"
            ]
          ]
        },
        "fill-outline-color": {
          "stops": [
            [14, "rgba(204, 204, 204, 1)"],
            [15, "rgba(225, 224, 218, 1)"]
          ]
        }
      }
    },
    {
      "id": "landuse-industrial",
      "type": "fill",
      "source": "local",
      "source-layer": "landuse",
      "minzoom": 10,
      "maxzoom": 24,
      "filter": [
        "all",
        [
          "in",
          "subclass",
          "industrial",
          "aerodrome"
        ]
      ],
      "layout": {
        "visibility": "visible"
      },
      "paint": {
        "fill-color": "rgba(212, 189, 182, 1)",
        "fill-outline-color": "rgba(212, 189, 182, 1)"
      }
    },
    {
      "id": "landuse-grassland",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 10,
      "maxzoom": 24,
      "filter": [
        "all",
        [
          "in",
          "subclass",
          "grass",
          "park",
          "playground",
          "pitch",
          "golf_course",
          "recreation_ground",
          "cemetery"
        ]
      ],
      "paint": {
        "fill-color": "rgba(222, 233, 186, 1)",
        "fill-outline-color": "rgba(0, 0, 0, 0)"
      }
    },
    {
      "id": "landuse-forest",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": [
        "all",
        [
          "in",
          "subclass",
          "wood",
          "scrub",
          "forest"
        ]
      ],
      "paint": {
        "fill-color": "rgba(176, 208, 144, 1)",
        "fill-outline-color": "rgba(0, 0, 0, 0)"
      }
    },
    {
      "id": "landuse-beach",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 11,
      "maxzoom": 24,
      "filter": [
        "all",
        [
          "in",
          "subclass",
          "beach"
        ],
        [
          "in",
          "surface",
          "sand",
          ""
        ]
      ],
      "paint": {
        "fill-color": "#ffe88b",
        "fill-outline-color": "rgba(0, 0, 0, 0)"
      }
    },
    {
      "id": "water-way",
      "type": "line",
      "source": "local",
      "source-layer": "waterway",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": [
        "any",
        ["all",
          [">=", ["zoom"], 14],
          ["match", ["get", "subclass"], ["river", "canal", "stream", "ditch"], true, false],
          ["!=", ["get", "tunnel"], true]
        ],
        ["all",
          [">=", ["zoom"], 12],
          ["<", ["zoom"], 14],
          ["match", ["get", "subclass"], ["river", "canal", "stream"], true, false],
          ["!=", ["get", "tunnel"], true]
        ],
        ["all",
          [">=", ["zoom"], 7],
          ["<", ["zoom"], 12],
          ["match", ["get", "subclass"], ["river", "canal"], true, false],
          ["!=", ["get", "tunnel"], true]
        ]

      ],
      "layout": {
        "line-join": "round",
        "line-cap": "round"
      },
      "paint": {
        "line-color": "rgba(31, 131, 188, 1)",
        "line-width": [
          "interpolate", ["exponential", 2], ["zoom"],
          7, ["match", ["get", "subclass"], "river", 1, "canal", 1, 1],
          9, ["match", ["get", "subclass"], "river", 2, "canal", 2, 1],
          12, ["match", ["get", "subclass"], "river", 3, "canal", 3, "stream", 1, 1],
          14, ["match", ["get", "subclass"], "river", 5, "canal", 5, "stream", 3, "ditch", 2, 1],
          18, ["match", ["get", "subclass"], "river", 50, "canal", 50, "stream", 30, "ditch", 10, 1]
        ]
      }
    },
    {
      "id": "water-area",
      "type": "fill",
      "source": "local",
      "source-layer": "waterarea",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": [
        "all"
      ],
      "layout": {},
      "paint": {
        "fill-color": "rgba(123, 171, 205, 1)",
        "fill-outline-color": "rgba(31, 131, 188, 1)"
      }
    },
    {
      "id": "landuse-swamp-fill",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": ["match", ["get", "subclass"], "wetland", true, false],
      "layout": {},
      "paint": {
        "fill-opacity": 0.2,
        "fill-color": "rgba(51, 153, 102, 1)",
        "fill-outline-color": "rgba(0, 0, 0, 0)"
      }
    },
    {
      "id": "landuse-swamp-pattern",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": ["match", ["get", "subclass"], "wetland", true, false],
      "layout": {},
      "paint": {
        "fill-opacity": 0.6,
        "fill-pattern": "wetland"
      }
    },
    {
      "id": "landuse-glacier-fill",
      "type": "fill",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": ["match", ["get", "subclass"], "glacier", true, false],
      "layout": {},
      "paint": {
        "fill-opacity": 0.5,
        "fill-color": "rgba(255, 255, 255, 1)",
        "fill-outline-color": "rgba(0, 0, 0, 0)"
      }
    },
    {
      "id": "landuse-glacier-outline",
      "type": "line",
      "source": "local",
      "source-layer": "landcover",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": ["match", ["get", "subclass"], "glacier", true, false],
      "layout": {},
      "paint": {
        "line-opacity": 0.5,
        "line-color": "rgba(173, 216, 230, 1)",
        "line-width": [
          "interpolate", ["exponential", 2], ["zoom"],
          10, 2,
          16, 10
        ]
      }
    },
    {
      "id": "landuse-military-pattern",
      "type": "fill",
      "source": "local",
      "source-layer": "landuse",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": [
        "all",
          ["match", ["get", "subclass"], "military", true, false]
      ],
      "layout": {},
      "paint": {
        "fill-opacity": 0.2,
        "fill-pattern": "stripes",
        "fill-outline-color": "rgba(255, 0, 0, 1)"
      }
    },
    {
      "_comment": "FIXME: Add additional thick translucent line",
      "id": "landuse-nature_reserve-outline-thin",
      "type": "line",
      "source": "local",
      "source-layer": "landuse",
      "minzoom": 7,
      "maxzoom": 24,
      "filter": ["match", ["get", "subclass"], "nature_reserve", true, false],
      "layout": {
        "line-join": "round",
        "line-cap": "round"
      },
      "paint": {
        "line-blur": 1,
        "line-opacity": 0.6,
        "line-color": "rgba(32, 128, 32, 1)",
        "line-width": [
          "interpolate", ["exponential", 2], ["zoom"],
          10, 6,
          16, 10
        ]
      }
    },
    {
      "id": "hillshading",
      "source": "mapbox-terrain-rgb",
      "type": "hillshade",
      "maxzoom": 15,
      "layout": {
        "visibility": "visible"
      },      
      "paint": {
        "hillshade-illumination-direction": 315,
        "hillshade-exaggeration": 0.4,
        "hillshade-shadow-color": {
          "stops": [
            [14, "rgba(0, 0, 0, 1)"],
            [15, "rgba(0, 0, 0, 0)"]
          ]
        },
        "hillshade-highlight-color": "rgba(255, 255, 255, 0)",
        "hillshade-accent-color": "rgba(0, 0, 0, .5)"
      }
    },
    {
      "id": "buildings-large",
      "type": "fill",
      "source": "local",
      "source-layer": "buildings-large",
      "minzoom": 13,
      "maxzoom": 15,
      "filter": [
        "all"
      ],
      "paint": {
        "fill-color": "#444",
        "fill-opacity": {
          "base": 1,
          "stops": [
            [13, 0.1],
            [14, 1]
          ]
        },
        "fill-outline-color": {
          "stops": [
            [13, "rgba(204, 204, 204, 1)"],
            [14, "rgba(68, 68, 68, 1)"]
          ]
        }
      }
    },
    {
      "id": "buildings",
      "type": "fill",
      "source": "local",
      "source-layer": "buildings",
      "minzoom": 14,
      "maxzoom": 24,
      "filter": [
        "all"
      ],
      "paint": {
        "fill-color": "#444",
        "fill-opacity": {
          "base": 1,
          "stops": [
            [14, 0.1],
            [15, 1]
          ]
        },
        "fill-outline-color": {
          "stops": [
            [14, "rgba(204, 204, 204, 1)"],
            [15, "rgba(68, 68, 68, 1)"],
            [16, "rgba(68, 68, 68, 1)"],
            [17, "rgba(102, 102, 102, 1)"]
          ]
        }
      }
    },
    {
      "id": "debug-tile-outline",
      "type": "line",
      "source": "local",
      "source-layer": "debug-tile-outline",
      "layout": {
        "visibility": "none"
      },
      "paint": {
        "line-color": "#ff0000"
      }
    },
    {
      "id": "debug-tile-center",
      "type": "symbol",
      "source": "local",
      "source-layer": "debug-tile-center",
      "minzoom": 0,
      "maxzoom": 24,
      "filter": [
        "all"
      ],
      "paint": {"text-color": "#ff0000"},
      "layout": {
        "visibility": "none",
        "text-field": "{zxy}"
      }
    }       
  ],
  "id": "cndhwdkjr"
}