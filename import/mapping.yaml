---
# generalized_tables:
    # FIXME: filter out unused subclasses
    # FIXME: find a way to generate valid geometries by simplifying the previous gen-level
    # FIXME: add generalized buildings
  # landuse_gen8:
  #   source: landuse_gen9
  #   sql_filter: ST_Area(geometry)>5000000.0
  #   tolerance: 500.0    
  # landuse_gen9:
  #   source: landuse_gen10
  #   sql_filter: ST_Area(geometry)>2000000.0
  #   tolerance: 200.0    
  # landuse_gen10:
  #   source: landuse_gen11
  #   sql_filter: ST_Area(geometry)>200000.0
  #   tolerance: 100.0    
  # landuse_gen11:
  #   source: landuse_gen12
  #   sql_filter: ST_Area(geometry)>50000.0
  #   tolerance: 50.0    
  # landuse_gen12:
  #   source: landuse_gen13
  #   sql_filter: ST_Area(geometry)>5000.0
  #   tolerance: 20.0    
  # landuse_gen13:
  #   source: landuse_gen14
  #   sql_filter: ST_Area(geometry)>2000.0
  #   tolerance: 10.0    
  # landuse_gen14:
  #   source: landuse
  #   sql_filter: ST_Area(geometry)>1000.0
  #   tolerance: 5.0    
tables:
  waterarea:
    type: polygon
    columns:
    - name: osm_id
      type: id      
    - name: geometry
      type: geometry
    - name: area
      type: area
    - name: class
      type: mapping_key
    - name: subclass
      type: mapping_value
    mapping:
      natural: [water, pond]
      landuse: [reservoir, basin]
      waterway: [riverbank, pond]

  waterway:
    type: linestring
    columns:
    - name: osm_id
      type: id      
    - name: geometry
      type: geometry
    - name: class
      type: mapping_key
    - name: subclass
      type: mapping_value
    - name: tunnel
      type: bool
      key: tunnel
    - name: layer
      type: integer
      key: layer
    mapping:
      waterway: [river, canal, stream, ditch]

  landuse:
  # FIXME: remove unused columns
    type: polygon
    columns:
    - name: osm_id
      type: id      
    - name: geometry
      type: geometry
    - name: area
      type: area
    - name: class
      type: mapping_key
    - name: subclass
      type: mapping_value
    - name: surface
      type: string
      key: surface
    mapping:
      landuse: [residential, commercial, retail, forest, military, recreation_ground, grass, cemetery, industrial]
      leisure: [park, playground, pitch, golf_course]
      aeroway: [aerodrome]
      natural: [wood, scrub, beach]
      
  shiproute:
    type: linestring
    columns:
    - name: geometry
      type: geometry
    mapping:
      route: [ferry]

  cycleroute:
    type: relation_member
    relation_types: [route]
    columns:
    - name: geometry
      type: geometry
    - name: ref
      type: string      
      key: ref
    - name: name
      type: string      
      key: name
    mapping:
      route: [bicycle]

  buildings:
    type: polygon
    columns:
    - name: geometry
      type: geometry
    mapping:
      building: [__any__]

  admin:
    type: linestring
    columns:
    - name: geometry
      type: geometry
    - name: ref
      type: string
      key: ref
    - name: level
      type: integer
      key: admin_level
    mapping:
      boundary: [administrative]
